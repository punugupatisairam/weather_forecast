<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Weather Forecast</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
  </head>
  <body>
    <div class="searchbar">
        <div class="searchBarParentDiv">
            <input type="text" name="" id="" class="iputfeild" placeholder="search the city">
            <img src="search.png" alt="image loading" width="35px" class="searchIcon" onclick="fetchdata()">
          </div>
    </div>
    <div class="mainContentParentDiv">
        <div class="leftDiv">
          <div class="currentTempDiv leftChild p-3 d-flex flex-column gap-1">
            <h6 id="cityName">City Name</h6>
            <h5><span id="cityTemp">0</span> &deg;C</h5>
            <h6 id="skyDesc">Sky Description</h6>
            <hr class="line">
            <div >
              <img src="calendar.png" alt="img-loading" width="25px">
              <span id="date">Date</span>
            </div>
            <div>
              <img src="time.png" alt="img-loading" width="25px">
              <span id="time">Time</span>
            </div>

          </div>
          <div class="nextFiveDays leftChild p-3"> 
            <h6 class="m-0 comFiveDaysTitle">Coming 5 Days</h6>
            <div>
              <div class="forecastRow d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center">
                  <img src="cloud.png" alt="" width="35px">
                  <h6 class="m-0">7 &deg; C</h6>
                </div>
                <h6 class="m-0">Tuesday</h6>
                <h6 class="m-0">08-04-2025</h6>
              </div>
              <div class="forecastRow d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center">
                  <img src="cloud.png" alt="" width="35px">
                  <h6 class="m-0">7 &deg; C</h6>
                </div>
                <h6 class="m-0">Tuesday</h6>
                <h6 class="m-0">08-04-2025</h6>
              </div>
              <div class="forecastRow d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center">
                  <img src="cloud.png" alt="" width="35px">
                  <h6 class="m-0">7 &deg; C</h6>
                </div>
                <h6 class="m-0">Tuesday</h6>
                <h6 class="m-0">08-04-2025</h6>
              </div>
              <div class="forecastRow d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center">
                  <img src="cloud.png" alt="" width="35px">
                  <h6 class="m-0">7 &deg; C</h6>
                </div>
                <h6 class="m-0">Tuesday</h6>
                <h6 class="m-0">08-04-2025</h6>
              </div>
              <div class="forecastRow d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center">
                  <img src="cloud.png" alt="" width="35px">
                  <h6 class="m-0">7 &deg; C</h6>
                </div>
                <h6 class="m-0">Tuesday</h6>
                <h6 class="m-0">08-04-2025</h6>
              </div>
            </div>
          </div>
        </div>
        <div class="rightDiv">
          <div class="rightRow rowOne d-flex gap-2 align-items-center justify-content-between">

            <div class="extraMetric d-flex gap-3">
                <img src="wind (1).png" alt="" width="35px">
                <div>
                  <h6 class="m-0">Metric Name</h6>
                  <h6 class="m-0">Mteric Vlaue</h6>
                </div>
            </div>
            <div class="extraMetric d-flex gap-3">
              <img src="wind (1).png" alt="" width="35px">
              <div>
                <h6 class="m-0">Metric Name</h6>
                <h6 class="m-0">Mteric Vlaue</h6>
              </div>
            </div>
            <div class="extraMetric d-flex gap-3">
              <img src="wind (1).png" alt="" width="35px">
              <div>
                <h6 class="m-0">Metric Name</h6>
                <h6 class="m-0">Mteric Vlaue</h6>
              </div>
            </div>
            <div class="extraMetric d-flex gap-3">
              <img src="wind (1).png" alt="" width="35px">
              <div>
                <h6 class="m-0">Metric Name</h6>
                <h6 class="m-0">Mteric Vlaue</h6>
              </div>
             </div>
                
          </div>

          <div class="rightRow rowTwo mb-3 d-flex justify-content-between align-items-center">
            <div class="AQI rowTwoDiv d-flex flex-column gap-1 p-3">
              <h5>Air Quality Index (AQI)</h5>

                <div class="d-flex align-items-center gap-4">
                <img src="wind.png" alt="" width="35px">
                <div class="text-center">
                  <h6 id="co">AQI Metric</h6>
                  <h6 id="coValue">0</h6>
                </div>
                <div class="text-center">
                  <h6 id="no">AQI Metric</h6>
                  <h6 id="noValue">0</h6>
                </div>
                <div class="text-center">
                  <h6 id="no2">AQI Metric</h6>
                  <h6 id="no2Value">0</h6>
                </div>
                <div class="text-center">
                  <h6 id="o3">AQI Metric</h6>
                  <h6 id="o3Value">0</h6>
                </div>
                </div >
            </div>
            <div class="sunRise rowTwoDiv p-3">
              <h5>SunRise & SUnset</h5>

              <div class="d-flex justify-content-between ">  
                <div class="sunRise d-flex align-items-center gap-2">
                  <img src="sun (1).png" alt="" width="70px">
                  <div class="d-flex flex-column">
                    <h6 >Sunrise</h6>
                    <h6 id="sunrise">6:00 AM</h6>
                  </div>
                </div>

                <div class="sunSet gap-2 d-flex align-items-center">
                  <img src="moon.png" alt="" width="60px">
                  <div >
                    <span class="m-0">Sunset</span> &nbsp;
                    <h6 class="m-0 " id="sunset">6:45 PM</h6>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="rightRow rowThree d-flex flex-column gap-2 ">
            <h5 class="m-0">Today </h5>
              <div class="d-flex justify-content-between todayTempParentDiv">
                <div class="todayTemp">
                  <h6 class="m-0">9:00 AM</h6>
                  <img src="cloudy.png" alt="" width="35px">
                  <h5>5 &deg; C</h5>
                </div>
                <div class="todayTemp">
                  <h6 class="m-0">9:00 AM</h6>
                  <img src="cloudy.png" alt="" width="35px">
                  <h5>5 &deg; C</h5>
                </div>
                <div class="todayTemp">
                  <h6 class="m-0">9:00 AM</h6>
                  <img src="cloudy.png" alt="" width="35px">
                  <h5>5 &deg; C</h5>
                </div>
                <div class="todayTemp">
                  <h6 class="m-0">9:00 AM</h6>
                  <img src="cloudy.png" alt="" width="35px">
                  <h5>5 &deg; C</h5>
                </div>
                <div class="todayTemp">
                  <h6 class="m-0">9:00 AM</h6>
                  <img src="cloudy.png" alt="" width="35px">
                  <h5>5 &deg; C</h5>
                </div>
                <div class="todayTemp">
                  <h6 class="m-0">9:00 AM</h6>
                  <img src="cloudy.png" alt="" width="35px">
                  <h5>5 &deg; C</h5>
                </div>
              </div>
          </div>

        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.min.js" integrity="sha384-VQqxDN0EQCkWoxt/0vsQvZswzTHUVOImccYmSyhJTp7kGtPed0Qcx8rK9h9YEgx+" crossorigin="anonymous"></script>
    
    <script>
      async function fetchAQIdata(lat,lon){
            let fetchAQIdata = await fetch(`https://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${lon}&appid=76edd73ca5b513b30a3cbd154eaef5fb`)
            let formatAQIdata = await fetchAQIdata.json();
            console.log(formatAQIdata);
            let list = formatAQIdata.list[0].components
            console.log(list);

            $('#co')[0].innerText="CO"
            $('#coValue')[0].innerText=list.co

            $('#no')[0].innerText="no"
            $('#noValue')[0].innerText=list.no
            
            $('#no2')[0].innerText="no2"
            $('#no2Value')[0].innerText=list.no2
            
            $('#o3')[0].innerText="o3"
            $('#o3Value')[0].innerText=list.o3
            
      }
      function dateFormat(timestamp) {
        const date = new Date(timestamp * 1000); // assuming UNIX timestamp
        return date.toLocaleString(); // returns "4/8/2025, 10:35:12 AM"
      }

     async function fetchdata() {
        let cityName = document.getElementsByClassName('iputfeild')[0].value;
        let responseData = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=76edd73ca5b513b30a3cbd154eaef5fb&units=metric`)
        let formatData = await responseData.json();
        // console.log(formatData);
        let responseCityName = formatData.name;
        $('#cityName')[0].innerText=responseCityName;

        let responseDegrees = formatData.main.temp;
        $('#cityTemp')[0].innerText=responseDegrees

        let description = formatData.weather[0].description;
        $('#skyDesc')[0].innerText=description;

        //update date and time
        let properDate = dateFormat(formatData.dt)
        let Date = properDate.split(',')[0]
        let Time = properDate.split(',')[1]
        $('#date')[0].innerText=Date
        $('#time')[0].innerText=Time

        //update sunrise and sunset
        let sunrise = dateFormat(formatData.sys.sunrise).split(',')[1]
        let sunset = dateFormat(formatData.sys.sunset).split(',')[1]
        $('#sunrise')[0].innerText=sunrise;
        $('#sunset')[0].innerText=sunset;

        //update lattitude and longitude
        let lat = formatData.coord.lat;
        let lon = formatData.coord.lon;
        fetchAQIdata(lat,lon);

       

      }
    </script>

  </body>
</html>